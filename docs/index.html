<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="top-bar">
  <center><pre><span class="main-header"><a id="lispish-header" onclick="setActive('index')">Lispish</a></span></pre></center>
</div>
  <div class="row">
    <div class="sidebar">
      <ul>
        <a class="small-pre" onclick="setActive('_notequal')"><li id="_notequal_link">!=</li></a>
        <a class="small-pre" onclick="setActive('_percent')"><li id="_percent_link">%</li></a>
        <a class="small-pre" onclick="setActive('_star')"><li id="_star_link">*</li></a>
        <a class="small-pre" onclick="setActive('_plus')"><li id="_plus_link">+</li></a>
        <a class="small-pre" onclick="setActive('_minus')"><li id="_minus_link">-</li></a>
        <a class="small-pre" onclick="setActive('_slash')"><li id="_slash_link">/</li></a>
        <a class="small-pre" onclick="setActive('1_plus')"><li id="1_plus_link">1+</li></a>
        <a class="small-pre" onclick="setActive('1_minus')"><li id="1_minus_link">1-</li></a>
        <a class="small-pre" onclick="setActive('_lt')"><li id="_lt_link">&lt;</li></a>
        <a class="small-pre" onclick="setActive('_lte')"><li id="_lte_link">&lt;=</li></a>
        <a class="small-pre" onclick="setActive('_equal')"><li id="_equal_link">=</li></a>
        <a class="small-pre" onclick="setActive('_gt')"><li id="_gt_link">&gt;</li></a>
        <a class="small-pre" onclick="setActive('_gte')"><li id="_gte_link">&gt;=</li></a>
        <a class="small-pre" onclick="setActive('and')"><li id="and_link">and</li></a>
        <a class="small-pre" onclick="setActive('append')"><li id="append_link">append</li></a>
        <a class="small-pre" onclick="setActive('aref')"><li id="aref_link">aref</li></a>
        <a class="small-pre" onclick="setActive('boolean_question')"><li id="boolean_question_link">boolean?</li></a>
        <a class="small-pre" onclick="setActive('ceil')"><li id="ceil_link">ceil</li></a>
        <a class="small-pre" onclick="setActive('concat')"><li id="concat_link">concat</li></a>
        <a class="small-pre" onclick="setActive('even_question')"><li id="even_question_link">even?</li></a>
        <a class="small-pre" onclick="setActive('expt')"><li id="expt_link">expt</li></a>
        <a class="small-pre" onclick="setActive('floor')"><li id="floor_link">floor</li></a>
        <a class="small-pre" onclick="setActive('function_question')"><li id="function_question_link">function?</li></a>
        <a class="small-pre" onclick="setActive('integer_question')"><li id="integer_question_link">integer?</li></a>
        <a class="small-pre" onclick="setActive('list_question')"><li id="list_question_link">list?</li></a>
        <a class="small-pre" onclick="setActive('not')"><li id="not_link">not</li></a>
        <a class="small-pre" onclick="setActive('null_question')"><li id="null_question_link">null?</li></a>
        <a class="small-pre" onclick="setActive('number_question')"><li id="number_question_link">number?</li></a>
        <a class="small-pre" onclick="setActive('object_question')"><li id="object_question_link">object?</li></a>
        <a class="small-pre" onclick="setActive('odd_question')"><li id="odd_question_link">odd?</li></a>
        <a class="small-pre" onclick="setActive('or')"><li id="or_link">or</li></a>
        <a class="small-pre" onclick="setActive('random')"><li id="random_link">random</li></a>
        <a class="small-pre" onclick="setActive('regexp_question')"><li id="regexp_question_link">regexp?</li></a>
        <a class="small-pre" onclick="setActive('round')"><li id="round_link">round</li></a>
        <a class="small-pre" onclick="setActive('sqrt')"><li id="sqrt_link">sqrt</li></a>
        <a class="small-pre" onclick="setActive('string-length')"><li id="string-length_link">string-length</li></a>
        <a class="small-pre" onclick="setActive('string_lt')"><li id="string_lt_link">string&lt;</li></a>
        <a class="small-pre" onclick="setActive('string_lte')"><li id="string_lte_link">string&lt;=</li></a>
        <a class="small-pre" onclick="setActive('string_gt')"><li id="string_gt_link">string&gt;</li></a>
        <a class="small-pre" onclick="setActive('string_gte')"><li id="string_gte_link">string&gt;=</li></a>
        <a class="small-pre" onclick="setActive('string_question')"><li id="string_question_link">string?</li></a>
        <a class="small-pre" onclick="setActive('substring')"><li id="substring_link">substring</li></a>
        <a class="small-pre" onclick="setActive('undefined_question')"><li id="undefined_question_link">undefined?</li></a>
        <a class="small-pre" onclick="setActive('write')"><li id="write_link">write</li></a>
        <a class="small-pre" onclick="setActive('zero_question')"><li id="zero_question_link">zero?</li></a>
      </ul>
    </div>
    <div class="main">
      <div id="index" class="content active">
      <h1>Welcome to the Lispish playground!</h1>
      <p>Lispish is a Lisp dialect made to work well in a browser or Node environment.</p>
      <p>Quite a lot in Lispish is not what you're used to if you've done some Lisp before.</p>
      <ul>
        <li><pre>t</pre> and <pre>nil</pre> are gone. Instead there are four new symbols: <pre>true</pre>, <pre>false</pre>, <pre>null</pre> and <pre>undefined</pre>.</li>
        <li>Only one sequence type exists: <pre>list</pre>. And its undelaying data structure is a javascript array.</li>
        <li>No quotes! <pre>'(1 2 3)</pre> is no more... Use <pre>(list 1 2 3)</pre> instead.</li>
        <li>No macros.</li>
        <li>No keyword symbols e.g. <pre>:foo</pre>.</li>
        <li>No tail call optimization (yet).</li>
        <li>No dotted pairs.</li>
      </ul>
      <p>Have a look at the list of functions to the left. These are what is available in terms of special- and normal expressions.</p>
      <p>For more instruction on how to install and use lispish as a cli or a typescript lib, checkout <a href="https://github.com/mojir/lispish">https://github.com/mojir/lispish</a></p>
      <p/>
      <p>Happy coding!</p>



      </div>
          <div id="_plus" class="content">
      <h1>+</h1>
      <p>Computes sum of numbers</p>
      <label>Syntax</label>
      <pre>+ numbers(zero or more) => number</pre>
    </div>

    <div id="_minus" class="content">
      <h1>-</h1>
      <p>Computes difference between first value and sum of the rest. When called with only one argument, it does negation.</p>
      <label>Syntax</label>
      <pre>- numbers(zero or more) => number</pre>
    </div>

    <div id="_star" class="content">
      <h1>*</h1>
      <p>Computes product of numbers.</p>
      <label>Syntax</label>
      <pre>* numbers(zero or more) => number</pre>
    </div>

    <div id="_slash" class="content">
      <h1>/</h1>
      <p>Computes division or reciprocal. When called with one argument it computes reciprocal. When called with two or more arguments it does compute division of the first by the all remaining number.</p>
      <label>Syntax</label>
      <pre>/ numbers(zero or more) => number</pre>
    </div>

    <div id="_percent" class="content">
      <h1>%</h1>
      <p>Returns modulus of two number arguments.</p>
      <label>Syntax</label>
      <pre>% number divisor => number</pre>
    </div>

    <div id="_notequal" class="content">
      <h1>!=</h1>
      <p>Result is true if no two numbers are equal to each other, otherwise result is false. Note that only two argument version result is negation of = function, that is (!= a b) is same as (! (= a b)).</p>
      <label>Syntax</label>
      <pre>!= numbers (one or more) => true | false</pre>
    </div>

    <div id="not" class="content">
      <h1>not</h1>
      <p>Computes logical negation. Note that any other value than false, 0, null, undefined and "" is considered as true.</p>
      <label>Syntax</label>
      <pre>not value => true | false</pre>
    </div>

    <div id="1_plus" class="content">
      <h1>1+</h1>
      <p>Adds one to the argument.</p>
      <label>Syntax</label>
      <pre>1+ number => number</pre>
    </div>

    <div id="1_minus" class="content">
      <h1>1-</h1>
      <p>Subtracts one from the argument.</p>
      <label>Syntax</label>
      <pre>1- number => number</pre>
    </div>

    <div id="sqrt" class="content">
      <h1>sqrt</h1>
      <p>Computes square root of number.</p>
      <label>Syntax</label>
      <pre>sqrt number => number</pre>
    </div>

    <div id="expt" class="content">
      <h1>expt</h1>
      <p>Computes returns base-number raised to the power-number.</p>
      <label>Syntax</label>
      <pre>expt base-number power-number => number</pre>
    </div>

    <div id="round" class="content">
      <h1>round</h1>
      <p>Returns argument rounded to the nearest integer.</p>
      <label>Syntax</label>
      <pre>round number => integer</pre>
    </div>

    <div id="floor" class="content">
      <h1>floor</h1>
      <p>Returns the largest integer less than or equal to the argument.</p>
      <label>Syntax</label>
      <pre>floor number => integer</pre>
    </div>

    <div id="ceil" class="content">
      <h1>ceil</h1>
      <p>Returns the smallest integer larger than or equal to the argument.</p>
      <label>Syntax</label>
      <pre>ceil number => integer</pre>
    </div>

    <div id="random" class="content">
      <h1>random</h1>
      <p>Returns a semi random number between 0 (inclusive) and argument (exclusive).</p>
      <label>Syntax</label>
      <pre>random number => number</pre>
    </div>

    <div id="_lt" class="content">
      <h1><</h1>
      <p>Compares numbers according to "less than" predicate. Each (overlapping) pair of the numbers is compared by it. The result is true if all compared pairs satisfy comparison.</p>
      <label>Syntax</label>
      <pre>< number => true | false</pre>
    </div>

    <div id="_gt" class="content">
      <h1>></h1>
      <p>Compares numbers according to "greater than" predicate. Each (overlapping) pair of the numbers is compared by it. The result is true if all compared pairs satisfy comparison.</p>
      <label>Syntax</label>
      <pre>> number => true | false</pre>
    </div>

    <div id="_lte" class="content">
      <h1><=</h1>
      <p>Compares numbers according to "less than or equal" predicate. Each (overlapping) pair of the numbers is compared by it. The result is true if all compared pairs satisfy comparison.</p>
      <label>Syntax</label>
      <pre><= number => true | false</pre>
    </div>

    <div id="_gte" class="content">
      <h1>>=</h1>
      <p>Compares numbers according to "greater than or equal" predicate. Each (overlapping) pair of the numbers is compared by it. The result is true if all compared pairs satisfy comparison.</p>
      <label>Syntax</label>
      <pre>>= number => true | false</pre>
    </div>

    <div id="_equal" class="content">
      <h1>=</h1>
      <p>Compares numbers according to "equal" predicate. Result is true if every specified number is equal to each other, otherwise result is false.</p>
      <label>Syntax</label>
      <pre>= number => true | false</pre>
    </div>

    <div id="and" class="content">
      <h1>and</h1>
      <p>Computes logical "and" function. Forms evaluation starts from left. Value from the first form that decides result is returned so forms at end of argument list may not evaluated.</p>
      <label>Syntax</label>
      <pre>and forms => true | false</pre>
    </div>

    <div id="or" class="content">
      <h1>or</h1>
      <p>Computes logical "or" function. Forms evaluation starts from left. Value from the first form that decides result is returned so forms at end of argument list may not evaluated.</p>
      <label>Syntax</label>
      <pre>or forms => true | false</pre>
    </div>

    <div id="append" class="content">
      <h1>append</h1>
      <p>Concatenates list arguments into one list. Resulting list is shallow copy of specified lists.</p>
      <label>Syntax</label>
      <pre>append lists (zero or more) => list</pre>
    </div>

    <div id="aref" class="content">
      <h1>aref</h1>
      <p>Accesses specified element of a string. String index is counted from zero. Accessing out-of-bounds indices returns undefined</p>
      <label>Syntax</label>
      <pre>aref string index => string</pre>
    </div>

    <div id="boolean_question" class="content">
      <h1>boolean?</h1>
      <p>Returns true if the argument is a boolean, otherwise it returns false.</p>
      <label>Syntax</label>
      <pre>boolean? value => true | false</pre>
    </div>

    <div id="null_question" class="content">
      <h1>null?</h1>
      <p>Returns true if the argument is null, otherwise it returns false.</p>
      <label>Syntax</label>
      <pre>null? value => true | false</pre>
    </div>

    <div id="undefined_question" class="content">
      <h1>undefined?</h1>
      <p>Returns true if the argument is undefined, otherwise it returns false.</p>
      <label>Syntax</label>
      <pre>undefined? value => true | false</pre>
    </div>

    <div id="number_question" class="content">
      <h1>number?</h1>
      <p>Returns true if the argument is a number, otherwise it returns false.</p>
      <label>Syntax</label>
      <pre>number? value => true | false</pre>
    </div>

    <div id="string_question" class="content">
      <h1>string?</h1>
      <p>Returns true if the argument is a string, otherwise it returns false.</p>
      <label>Syntax</label>
      <pre>string? value => true | false</pre>
    </div>

    <div id="function_question" class="content">
      <h1>function?</h1>
      <p>Returns true if the argument is a function, otherwise it returns false.</p>
      <label>Syntax</label>
      <pre>function? value => true | false</pre>
    </div>

    <div id="integer_question" class="content">
      <h1>integer?</h1>
      <p>Returns true if the argument is an integer, otherwise it returns false.</p>
      <label>Syntax</label>
      <pre>integer? value => true | false</pre>
    </div>

    <div id="list_question" class="content">
      <h1>list?</h1>
      <p>Returns true if the argument is a list, otherwise it returns false.</p>
      <label>Syntax</label>
      <pre>list? value => true | false</pre>
    </div>

    <div id="object_question" class="content">
      <h1>object?</h1>
      <p>Returns true if the argument is an object, otherwise it returns false.</p>
      <label>Syntax</label>
      <pre>object? value => true | false</pre>
    </div>

    <div id="regexp_question" class="content">
      <h1>regexp?</h1>
      <p>Returns true if the argument is a regexp, otherwise it returns false.</p>
      <label>Syntax</label>
      <pre>regexp? value => true | false</pre>
    </div>

    <div id="zero_question" class="content">
      <h1>zero?</h1>
      <p>Returns true if the argument is zero, otherwise it returns false.</p>
      <label>Syntax</label>
      <pre>zero? number => true | false</pre>
    </div>

    <div id="even_question" class="content">
      <h1>even?</h1>
      <p>Returns true if the argument is even, otherwise it returns false.</p>
      <label>Syntax</label>
      <pre>even? number => true | false</pre>
    </div>

    <div id="odd_question" class="content">
      <h1>odd?</h1>
      <p>Returns true if the argument is odd, otherwise it returns false.</p>
      <label>Syntax</label>
      <pre>odd? number => true | false</pre>
    </div>

    <div id="substring" class="content">
      <h1>substring</h1>
      <p>Extracts characters from indexStart up to but not including indexEnd</p>
      <label>Syntax</label>
      <pre>substring string indexStart indexEnd => string</pre>
    </div>

    <div id="string-length" class="content">
      <h1>string-length</h1>
      <p>Returns length of string.</p>
      <label>Syntax</label>
      <pre>string-length string => number</pre>
    </div>

    <div id="concat" class="content">
      <h1>concat</h1>
      <p>Returns length of string.</p>
      <label>Syntax</label>
      <pre>concat strings (zero or more) => number</pre>
    </div>

    <div id="string_gt" class="content">
      <h1>string></h1>
      <p>Compares the two string arguments lexicographically, and the result is true if string1 is greater than string2, otherwise result is false</p>
      <label>Syntax</label>
      <pre>string> string1 string2 => number</pre>
    </div>

    <div id="string_gte" class="content">
      <h1>string>=</h1>
      <p>Compares the two string arguments lexicographically, and the result is true if string1 is greater than or equal to string2, otherwise result is false</p>
      <label>Syntax</label>
      <pre>string>= string1 string2 => number</pre>
    </div>

    <div id="string_lt" class="content">
      <h1>string<</h1>
      <p>Compares the two string arguments lexicographically, and the result is true if string1 is less than string2, otherwise result is false</p>
      <label>Syntax</label>
      <pre>string< string1 string2 => number</pre>
    </div>

    <div id="string_lte" class="content">
      <h1>string<=</h1>
      <p>Compares the two string arguments lexicographically, and the result is true if string1 is less than or equal to string2, otherwise result is false</p>
      <label>Syntax</label>
      <pre>string<= string1 string2 => number</pre>
    </div>

    <div id="write" class="content">
      <h1>write</h1>
      <p>It console.log the value arguments and then returns the last argument. If called with no arguments undefined is returned</p>
      <label>Syntax</label>
      <pre>write values => value</pre>
    </div>

        <div class="playground">
    <div class="header">
      Playground <span class="play" onclick="play()">&#9654;</span>
    </div>
    <div class="row">
      <div class="column-half">
        <h4>Lisp</h4>
        <textarea spellcheck=false rows="20" id="code">(* x x)</textarea>
      </div>
      <div class="column-half">
        <h4>Context (JSON)</h4>
        <textarea spellcheck=false rows="20" id="context">{ "x": 12 }</textarea>
      </div>
    </div>
    <div id="output" />
  </div>
    </div>
  </div>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js" ></script>
  <script src="lispish.iife.js"></script>
  <script>
    var activeId='index';
    function play() {
      var code = document.getElementById("code").value
      var contextString = document.getElementById("context").value
      var output = document.getElementById("output")
      var context
      try {
        context = JSON.parse(contextString)
      } catch (e) {
        output.innerHTML = "Error: Could not parse context"
        output.classList.add('error')
        return
      }
      var result
      try {
        result = lispish.lispish(code, context)
      } catch (error) {
        output.innerHTML = error
        output.classList.add('error')
        return
      }
      output.classList.remove('error')
      output.innerHTML = JSON.parse(result)
    }
    function setActive(id) {
      document.getElementById(activeId).classList.remove('active')
      document.getElementById(id).classList.add('active')
      if (activeId !== 'index') {
        document.getElementById(activeId + '_link').classList.remove('active-sidebar-entry')
      }
      if (id !== 'index') {
        console.log(id + '_link')
        document.getElementById(id + '_link').classList.add('active-sidebar-entry')
      }
      activeId = id
    }
  </script>

</body>
</html>
